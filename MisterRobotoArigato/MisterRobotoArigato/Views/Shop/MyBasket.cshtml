@using Microsoft.AspNetCore.Identity;
@using MisterRobotoArigato.Models;
@inject UserManager<ApplicationUser> UserManager
@inject SignInManager<ApplicationUser> SignInManager
@model Basket
@{
    Layout = "_Layout";
}

<h2>My Basket</h2>
    @foreach (var basketItem in Model.BasketItems)
    {
<form asp-action="Update" method="post" asp-controller="Shop">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input type="hidden" asp-for="@basketItem.ID" />
    <input type="hidden" asp-for="@basketItem.ProductID" />
    <input type="hidden" asp-for="@basketItem.CustomerEmail" />
    <input type="hidden" asp-for="@basketItem.ImgUrl" />
    <input type="hidden" asp-for="@basketItem.UnitPrice" />

    <p>@basketItem.ProductName</p>
    <img src="@basketItem.ImgUrl" class="smaller-img" />
    <div class="form-group">
        <p>
            <label for="Quantity">Quantity</label>
            <input id="Quantity" asp-for="@basketItem.Quantity" type="number" value="@basketItem.Quantity" min="1">
        </p>
        <input type="submit" value="Update" class="btn btn-default" />
    </div>
    @{
        decimal total = basketItem.UnitPrice * basketItem.Quantity;
        <p>@total</p>
    }

</form>
<form asp-action="Delete" method="post" asp-controller="Shop">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input type="hidden" asp-for="@basketItem.ID" />
    <input type="hidden" asp-for="@basketItem.ProductID" />
    <input type="hidden" asp-for="@basketItem.CustomerEmail" />
    <input type="hidden" asp-for="@basketItem.ImgUrl" />
    <input type="hidden" asp-for="@basketItem.UnitPrice" />
    <input type="hidden" asp-for="@basketItem.Quantity" />
    @*<button type="submit" asp-for="@basketItem.Quantity" value="0">
            <i style="font-size:24px" class="fa">&#xf00d;</i>
        </button>*@
    <input type="submit" value="Delete" class="btn btn-danger" />

</form>
    <hr />
}
